(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(12),r=n.n(s),i=n(3),u=n(4),l=n(6),c=n(5),p=n(9),m=n(7),b=n(15),h=function(e){return o.a.createElement("button",{className:"square",onClick:e.onClick},e.value)},d=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"createBoard",value:function(e,t){for(var n=[],a=0,s=0;s<e;s+=1){for(var r=[],i=0;i<t;i+=1)r.push(this.renderSquare(a++));n.push(o.a.createElement("div",{key:s,className:"board-row"},r))}return n}},{key:"renderSquare",value:function(e){var t=this;return o.a.createElement(h,{key:e,value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return o.a.createElement("div",null,this.createBoard(3,3))}}]),t}(o.a.Component),f=n(1),C=n.n(f),g=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).newRound=function(e){var t=null===e?"Tie game!":"Player ".concat(e," won!");!1===n.props.isRoomCreator&&n.gameOver?(C.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"rgb(208,33,41)",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),n.turn="X"):n.props.isRoomCreator&&n.gameOver&&C.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Continue Playing?",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then(function(e){e.value?n.props.pubnub.publish({message:{reset:!0},channel:n.props.gameChannel}):n.props.pubnub.publish({message:{endGame:!0},channel:n.props.gameChannel})})},n.announceWinner=function(e){var t={X:n.state.xScore,O:n.state.oScore};"X"===e?(t.X+=1,n.setState({xScore:t.X})):(t.O+=1,n.setState({oScore:t.O})),n.gameOver=!0,n.newRound(e)},n.checkForWinner=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a+=1){var o=Object(b.a)(t[a],3),s=o[0],r=o[1],i=o[2];if(e[s]&&e[s]===e[r]&&e[s]===e[i])return void n.announceWinner(e[s])}n.counter++,9===n.counter&&(n.gameOver=!0,n.newRound(null))},n.publishMove=function(e,t){var a=n.state.squares;a[e]=t,n.turn="X"===a[e]?"O":"X",n.setState({squares:a,whosTurn:!n.state.whosTurn}),n.checkForWinner(a)},n.onMakeMove=function(e){var t=n.state.squares;t[e]||n.turn!==n.props.piece||(t[e]=n.props.piece,n.setState({squares:t,whosTurn:!n.state.whosTurn}),n.turn="X"===n.turn?"O":"X",n.props.pubnub.publish({message:{index:e,piece:n.props.piece,turn:n.turn},channel:n.props.gameChannel}),n.checkForWinner(t))},n.state={squares:Array(9).fill(""),xScore:0,oScore:0,whosTurn:n.props.myTurn},n.turn="X",n.gameOver=!1,n.counter=0,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,function(t){t.message.turn===e.props.piece?e.publishMove(t.message.index,t.message.piece):t.message.reset?(e.setState({squares:Array(9).fill(""),whosTurn:e.props.myTurn}),e.turn="X",e.gameOver=!1,e.counter=0,C.a.close()):t.message.endGame&&(C.a.close(),e.props.endGame())})}},{key:"render",value:function(){var e,t=this;return e="".concat(this.state.whosTurn?"Your turn":"Opponent's turn"),o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"board"},o.a.createElement(d,{squares:this.state.squares,onClick:function(e){return t.onMakeMove(e)}}),o.a.createElement("p",{className:"status-info"},e)),o.a.createElement("div",{className:"scores-container"},o.a.createElement("div",null,o.a.createElement("p",null,"Player X: ",this.state.xScore," ")),o.a.createElement("div",null,o.a.createElement("p",null,"Player O: ",this.state.oScore," "))))}}]),t}(o.a.Component),v=n(13),y=n.n(v),O=n(14),w=n.n(O),k=(n(41),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onPressCreate=function(e){n.roomId=w.a.generate().substring(0,5),n.lobbyChannel="tictactoelobby--"+n.roomId,n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),C.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friend",text:n.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),n.setState({piece:"X",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},n.onPressJoin=function(e){C.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class ",cancelButton:"join-button-class"}}).then(function(e){e.value&&n.joinRoom(e.value)})},n.joinRoom=function(e){n.roomId=e,n.lobbyChannel="tictactoelobby--"+n.roomId,n.pubnub.hereNow({channels:[n.lobbyChannel]}).then(function(e){e.totalOccupancy<2?(n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),n.setState({piece:"O"}),n.pubnub.publish({message:{notRoomCreator:!0},channel:n.lobbyChannel})):C.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress. Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})}).catch(function(e){console.log(e)})},n.endGame=function(){n.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),n.lobbyChannel=null,n.gameChannel=null,n.roomId=null,n.pubnub.unsubscribe({channels:[n.lobbyChannel,n.gameChannel]})},n.pubnub=new y.a({publishKey:"pub-c-456dd5a7-59d1-4af7-816e-d4a7f85bb308",subscribeKey:"sub-c-d38c42ee-b3bb-11e9-839f-e2cc45fa663b"}),n.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},n.lobbyChannel=null,n.gameChannel=null,n.roomId=null,n.pubnub.init(Object(p.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,function(t){t.message.notRoomCreator&&(e.gameChannel="tictactoegame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.setState({isPlaying:!0}),C.a.close())})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"title"},o.a.createElement("p",null,"React Tic Tac Toe")),!this.state.isPlaying&&o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"board"},o.a.createElement(d,{squares:0,onClick:function(e){return null}}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(t){return e.onPressCreate()}}," Create"),o.a.createElement("button",{className:"join-button",onClick:function(t){return e.onPressJoin()}}," Join")))),this.state.isPlaying&&o.a.createElement(g,{pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,myTurn:this.state.myTurn,xUsername:this.state.xUsername,oUsername:this.state.oUsername,endGame:this.endGame}))}}]),t}(a.Component));r.a.render(o.a.createElement(k,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.0bde601f.chunk.js.map